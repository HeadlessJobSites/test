<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JENSEN education - Lediga tjänster</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/index-style.css">
    <link rel="stylesheet" href="./css/job-details-style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="./files/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./files/favicon-16x16.png">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/ca38a06270.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script type="text/javascript" src="https://web103.reachmee.com/customerjs/helper.js"></script>

    <meta property="og:title" content="JENSEN education karriärportal">
    <meta property="og:image" content="https://headlessjobsites.github.io/jensen/files/HK.jpg">
    <meta property="og:url" content="https://headlessjobsites.github.io/jensen/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="JENSEN education karriärportal">
    <meta name="twitter:image" content="https://headlessjobsites.github.io/jensen/files/HK.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:type" content="website">

    <script>
        // Helper function to decode HTML entities using character codes
        function decodeHtmlCharCodes(str) {
            return str.replace(/(&#(\d+);)/g, function (match, capture, charCode) {
                return String.fromCharCode(charCode);
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            const params = new URLSearchParams(window.location.search);
            const jobId = params.get('rmjob') ? parseInt(params.get('rmjob'), 10) : parseInt(params.get('jobId'), 10);

            fetch('https://api.talentech.io/reachmee/feed/jensen')
                .then(response => response.json())
                .then(jobs => {
                    const job = jobs.find(job => job.ad_id === jobId);
                    if (job) {
                        // Decode HTML entities in the job title
                        const decodedTitle = decodeHtmlCharCodes(job.title);

                        // Update meta tags for social media sharing
                        updateMetaTags(decodedTitle, job.description);

                        // Delay setting the document title to ensure it's the last modification
                        setTimeout(() => {
                            document.title = decodedTitle;
                            console.log("Document title set to:", document.title);
                        }, 1000); // Delay of 1000 milliseconds (1 second)

                    } else {
                        console.error('Job not found.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching job details:', error);
                });
        });

        function updateMetaTags(title, description) {
            let ogTitle = document.querySelector('meta[property="og:title"]');
            let twitterTitle = document.querySelector('meta[name="twitter:title"]');
            let ogDescription = document.querySelector('meta[property="og:description"]');
            let twitterDescription = document.querySelector('meta[name="twitter:description"]');

            if (!ogTitle) {
                ogTitle = document.createElement('meta');
                ogTitle.setAttribute('property', 'og:title');
                document.head.appendChild(ogTitle);
            }
            if (!twitterTitle) {
                twitterTitle = document.createElement('meta');
                twitterTitle.setAttribute('name', 'twitter:title');
                document.head.appendChild(twitterTitle);
            }
            if (!ogDescription) {
                ogDescription = document.createElement('meta');
                ogDescription.setAttribute('property', 'og:description');
                document.head.appendChild(ogDescription);
            }
            if (!twitterDescription) {
                twitterDescription = document.createElement('meta');
                twitterDescription.setAttribute('name', 'twitter:description');
                document.head.appendChild(twitterDescription);
            }

            ogTitle.setAttribute('content', title);
            twitterTitle.setAttribute('content', title);
            ogDescription.setAttribute('content', description);
            twitterDescription.setAttribute('content', description);
        }
    </script>

</head>


<body>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const params = new URLSearchParams(window.location.search);
            const rmpage = params.get('rmpage');

            // Check if the rmpage parameter is set to 'profileactivate' or 'subscriptions'
            if (rmpage === 'profileactivate' || rmpage === 'subscriptions') {
                // Redirect to /profile with all existing query parameters
                window.location.href = '/profile.html?' + params.toString();
            }
        });
    </script>


    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container m-py-1">
            <a class="navbar-brand" href="./" aria-label="Home">
                <img src="./files/logo_jensen_vit.png" class="d-inline-block align-top" alt="JENSEN education logo">
            </a>
            <div class="d-flex justify-content-end align-items-center flex-grow-1">
                <a class="nav-link ml-auto d-lg-none btn btn-primary apply-btn btn-light-border m-mr-2" href="#appform-header">Ansök</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="d-flex d-lg-none mt-2 mobile-only">
                <!-- <a class="nav-link new-link mr-1" href="#tt-talentech-section-2">Møt teamet <i class="fa-thin fa-arrow-down"></i></a> -->
                <a class="nav-link new-link ml-1" href="#process">Rekrutteringsprosess <i class="fa-thin fa-arrow-down"></i></a>
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="./">Hem <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#appform-header">Ansök</a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="#tt-talentech-section-2">Träffa teamet</a>
                    </li> -->
                    <li class="nav-item">
                        <a class="nav-link" href="#process">Rekryteringsprocess</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" target="blank" href="https://www.jenseneducation.se/">jenseneducation.se<span class="sr-only">(current)</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
        $(document).ready(function () {
            if ($(window).width() <= 992) {
                $(".navbar").addClass("bg-dark");
            } else {
                $(window).scroll(function () {
                    if ($(window).scrollTop() > 56) {
                        $(".navbar").addClass("bg-dark");
                    } else {
                        $(".navbar").removeClass("bg-dark");
                    }
                });
                $(".navbar-toggler").click(function () {
                    if (!$(".navbar-collapse").hasClass("show")) {
                        $(".navbar").addClass("bg-dark");
                    } else {
                        if ($(window).scrollTop() < 56) {
                            $(".navbar").removeClass("bg-dark");
                        }
                    }
                });
            }
        });
    </script>

    <div class="hero-section">
        <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop" class="hero-video">
            <source src="./files/Toppvideo_ren.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <div class="job-title2" id="position-title"></div>
            <p id="position-title-meta" style="font-size: 1.25rem;"><span class="organization-unit"> </span> • <span class="city"> </span></p>
        </div>
    </div>


    <script src="./js/hero-background.js"></script>


    <div id="tt-job-section" class="job-section">
        <div class="container job-section-container">
            <div class="row">
                <div class="col-md-3 col-6 job-info">
                    <span class="job-info-title">Team</span>
                    <span class="organization-unit">Team</span>
                </div>
                <div class="col-md-3 col-6 job-info">
                    <span class="job-info-title">Plats</span>
                    <span class="city">Sted</span>
                </div>
                <div class="col-md-3 col-6 job-info">
                    <span class="job-info-title">Sista ansökningsdag</span>
                    <span class="expiration-date">Sista ansökningsdag</span>
                </div>
                <div class="col-md-3 col-6 text-center apply-btn-header">
                    <a href="#appform-header" class="btn btn-primary apply-btn" role="">Ansök</a>
                </div>
            </div>
        </div>
    </div>


    <section id="tt-talentech-section-1" class="talentech-section mb-5 m-pb-3">
        <div class="container mt-5 pt-3 m-px-4 m-mt-4">
            <div id="inner-job-title" class="mb-5 job-title m-mb-4"> </div>


            <!-- Share section -->
            <div class="container share-container mt-2 mt-sm-0 m-px-0 py-0">
                <span class="d-block d-sm-inline mb-1">
                    <a href="#" class="facebook-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/facebook.svg" alt="Share on Facebook" width="18" height="18">
                    </a>
                    <a href="#" class="twitter-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/x.svg" alt="Share on X" width="18" height="18">
                    </a>
                    <a href="#" class="linkedin-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/linkedin.svg" alt="Share on LinkedIn" width="18" height="18">
                    </a>
                </span>
            </div>
            <!-- END Share section -->


            <div class="my-3 job-description"> </div>
            <div class="contact-persons"></div>
        </div>

        <div class="text-center centerd-apply-btn">
            <a href="#appform-header" class="btn btn-primary apply-btn" role="">Skicka in ansökan</a>
        </div>
    </section>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const params = new URLSearchParams(window.location.search);
            const rmpage = params.get('rmpage');

            if (rmpage === 'profileactivate') {
                loadExternalScriptAndBuildIframe();
            }
        });

        function loadExternalScriptAndBuildIframe() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://web103.reachmee.com/customerjs/I003-393-5.js';
            script.onload = function () {
                buildIframe();
            };
            document.head.appendChild(script);
        }

        function buildIframe() {
            var iFrameUrl = 'https://web103.reachmee.com/ext/';
            var validator = '9e626e86cdd965bdf74dd0e8e585b5cc';
            var iid = 'I003';
            var customer = '393';
            var site = '5';
            var iHelperUrl = 'https://headlessjobsites.github.io/jensen/job-details.html?';
            var height = '4000';
            var langDef = 'SE';
            var title = 'ReachMee Recruit external site';

            // More URL building logic here, using the current script logic
            // Ensure the destination page is determined correctly
            var destPage = new URLSearchParams(window.location.search).get('rmpage') + '?';
            // Add other parameters based on your existing script logic

            iFrameUrl += destPage + 'site=' + site + '&validator=' + validator + '&lang=' + langDef;

            // Dynamically create the iframe
            var iframe = document.createElement('iframe');
            iframe.style.width = '100%';
            iframe.style.height = height + 'px';
            iframe.frameBorder = '0';
            iframe.title = title;
            iframe.src = iFrameUrl;

            var targetElement = document.getElementById('iframeContainer');
            if (!targetElement) {
                console.error('No element found to insert the iframe into');
                return;
            }
            targetElement.innerHTML = ''; // Clear previous content
            targetElement.appendChild(iframe);
        }

    </script>
    <div id="iframeContainer"></div>

    <!-- <section id="tt-talentech-section-2" class="team-section mb-5 pb-4 m-my-0 m-py-5">
        <center>
            <h2 class="container section-title">Träffa <span class="organization-unit" class="title-alt"></span><span class="title-alt"> teamet</span></h2>
        </center>
        <div class="container mt-0 pt-2 m-ml-0 m-px-0">
            <div class="row mt-3 m-mt-2 m-mx-0">
                <div id="gobi-section"></div>
            </div>
        </div>
    </section> -->

    <section id="process" class="process-section">
        <div class="container process-container section-container">
            <h2 class="section-title"><span class="title-alt">Rekryterings&shy;process</span></h2>
            <div class="row">
                <div class="col-md-4 col-sm-4 process-item process-item-video hide-on-pc">
                    <div class="process-content no-background gobi-video-item">
                        <script src="https://widget.gobistories.com/gwi/6" async onload="gobi.discover()"></script>

                        <div class="gobi-collection" data-gobi-collection-id="4uapw"></div>
                    </div>
                </div>
                <!-- Existing Content in Right Column -->
                <div class="col-md-12">
                    <div class="row process-row">
                        <div class="col-md-4 col-sm-4 process-item process-item-video hide-on-mobile">
                            <div class="process-content no-background">
                                <script src="https://widget.gobistories.com/gwi/6" async onload="gobi.discover()"></script>

                                <div class="gobi-collection" data-gobi-collection-id="4uapw"></div>
                            </div>
                        </div>
                        <!-- Benefit 1 -->
                        <div class="col-md-4 col-sm-4 process-item">
                            <div class="process-icon">
                                <h3>1</h3>
                            </div>
                            <div class="process-content" style="height: 80%;">
                                <h3>Skicka in din ansökan</h3>
                                <p>Är du redo att ta nästa steg i din karriär? Du skickar enkelt in din ansökan via vår karriärsida. Ladda upp ditt CV och andra eventuellt relevanta dokument. Vi ser fram emot att läsa din ansökan!</p>
                            </div>
                        </div>
                        <!-- Benefit 2 -->
                        <div class="col-md-4 col-sm-4 process-item">
                            <div class="process-icon">
                                <h3>2</h3>
                            </div>
                            <div class="process-content" style="height: 80%;">
                                <h3>Urval och tester</h3>
                                <p>Vi går igenom ansökningar löpande, så skicka in din ansökan så snart som möjligt! För att säkerställa en rättvis och träffsäker rekryteringsprocess använder vi oss av psykometriska tester. Du får direkt feedback på dina resultat digitalt efter att du har slutfört testet.</p>
                            </div>
                        </div>
                        <!-- Benefit 3 -->
                        <div class="col-md-4 col-sm-4 process-item">
                            <div class="process-icon">
                                <h3>3</h3>
                            </div>
                            <div class="process-content">
                                <h3>Intervjuprocess</h3>
                                <p>Om din profi l matchar våra behov bjuder vi in dig till en intervju. Vi tillämpar kompetensbaserade intervjuer, vilket innebär att vi fokuserar på dina tidigare erfarenheter och hur de matchar kraven för tjänsten.</p>
                            </div>
                        </div>
                        <!-- Benefit 4 -->
                        <div class="col-md-4 col-sm-4 process-item">
                            <div class="process-icon">
                                <h3>4</h3>
                            </div>
                            <div class="process-content">
                                <h3>Referenstagning och bakgrundskontroll</h3>
                                <p>Innan vi kan erbjuda dig en anställning genomför vi en standardiserad bakgrundskontroll. Det innebär att vi tar referenser från dina tidigare arbetsgivare och du får lämna utdrag från belastningsregistret.</p>
                            </div>
                        </div>
                        <!-- Benefit 5 -->
                        <div class="col-md-4 col-sm-4 process-item">
                            <div class="process-icon">
                                <h3>5</h3>
                            </div>
                            <div class="process-content">
                                <h3>Erbjudande</h3>
                                <p>Om vi har en ömsesidig matchning så är det nu dags att skriva på anställningsavtalet. Vi erbjuder dig möjligheten att få en betydelsefull roll i ett av Sveriges ledande utbildningsföretag.</p>
                            </div>
                        </div>
                    </div>
                    <div class="process-bottom">
                        <h3 class="process-bottom-title">Personuppgifter</h3>
                        <p class="process-bottom-text">Vi behandlar alla ansökningar konfidentiellt. Individens personliga integritet och säkerheten för dennes personuppgifter är viktig för oss på JENSEN education. JENSEN ansvarar för att se till att alla personuppgifter behandlas på ett korrekt sätt. Uppgifter som lämnats in i samband med din ansökan raderas automatiskt efter 26 månader.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="registration-form-section">
        <div class="container section-container">
            <h2 class="section-title pb-0 mb-0" id="appform-header" id="appFormWrapper"><span class="title-alt">Anmälnings&shy;formulär</span></h2>
            <!-- Application form or alternative message -->
            <div id="originalContentContainer">
                <div id="applicationFormContainer"></div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const params = new URLSearchParams(window.location.search);
            // Get 'rmjob' if present, otherwise get 'jobId'
            const jobId = params.get('rmjob') || params.get('jobId');

            // Fetch job details (assuming you have an endpoint to get job details by jobId)
            fetch(`https://api.talentech.io/reachmee/feed/jensen`) // Replace with your actual API endpoint
                .then(response => response.json())
                .then(jobs => {
                    const job = jobs.find(job => job.ad_id === parseInt(jobId));
                    if (job && job.hide_apply_button) {
                        // Display the message and button if hide_apply_button is true
                        const messageContainer = document.createElement('div');
                        messageContainer.innerHTML = `
                    <center><p class="mt-5">Ansökningsformuläret är inaktiverat för detta jobb. Se arbetsbeskrivningen för mer information om hur du ansöker.</p>
                    <a href="#tt-talentech-section-1" class="btn btn-primary my-5">Se arbetsbeskrivningen</a></center>
                `;
                        document.getElementById('applicationFormContainer').appendChild(messageContainer);
                    } else {
                        // Display the application form if hide_apply_button is false
                        if (!document.getElementById('applicationFormIframe')) {
                            const iframe = document.createElement('iframe');
                            iframe.style.width = "100%";
                            iframe.style.border = "none";
                            iframe.id = "applicationFormIframe";
                            const iframeSrc = `https://web103.reachmee.com/ext/I003/393/apply?job_id=${jobId}&site=5&validator=9e626e86cdd965bdf74dd0e8e585b5cc&lang=SE&ihelper=${encodeURIComponent('https://career.talentech.com/jobs/rm?rmpage=job&rmjob=' + jobId)}`;
                            iframe.setAttribute('src', iframeSrc);
                            document.getElementById('applicationFormContainer').appendChild(iframe);
                        }
                    }
                })
                .catch(error => {
                    console.error('Error fetching job details:', error);
                });
        });

        // Consolidate message listener, adding security check
        window.addEventListener('message', function (event) {
            // Verify the origin of your iframe content
            const expectedOrigin = 'https://web103.reachmee.com';
            if (event.origin === expectedOrigin && typeof event.data === 'string' && event.data.startsWith('resize::')) {
                const height = event.data.split('resize::')[1];
                if (height) {
                    document.getElementById('applicationFormIframe').style.height = height + 'px';
                }
            }
        }, false);
    </script>

    <section id="tt-feature-section" class="similar-jobs-section" id="jobs-anchor">
        <div class="container section-container similar-jobs-container">
            <h2 class="section-title">Liknande<span class="title-alt"> jobb</span></h2>
            <div class="row my-3">
                <div class="col-md-3 mb-3">
                    <label for="locationFilter">Plats</label>
                    <select id="locationFilter" class="form-control">
                        <option value="All">Alla platser</option>
                        <!-- Location options will be dynamically added here -->
                    </select>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="jobTypeFilter">Verksamhetsområden</label>
                    <select id="jobTypeFilter" class="form-control">
                        <option value="All">Alle verksamhetsområden</option>
                        <!-- Job type options will be dynamically added here -->
                    </select>
                </div>
            </div>
            <div id="jobList" class="row"></div>
            <div class="text-center mt-2">
                <button id="loadMore" class="btn btn-primary">Hämta flera</button>
            </div>
        </div>
    </section>

    <!-- Action section: register button and registration frame -->
    <section class="action-section">
        <div class="container action-container section-container" style="text-align: center;">
            <div class="action-top">
                <h2 class="section-title">Hittade du inte tjänsten för dig?</h2>
                <div class="">
                    <p>Prenumerera på tjänster så får du ett mail när det finns en ledig tjänst som matchar dina preferenser.</p>
                </div>
            </div>
            <button id="agent" class="mt-3 btn btn-primary" style="font-weight:800">Register dig</button>
            <div class="modal fade modal-fullscreen-90w" id="exampleModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" id="closeModalButton" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <iframe id="modalIframe" src="" style="border: none; width: 100%; height: 450px;"></iframe>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    document.getElementById('agent').addEventListener('click', function () {
                        var iframeUrl = "https://web103.reachmee.com/ext/I003/393/subscribe?site=5&lang=SE&validator=9e626e86cdd965bdf74dd0e8e585b5cc";
                        document.getElementById('modalIframe').src = iframeUrl;
                        $('#exampleModal').modal('show');
                    });
                });
            </script>
        </div>

    </section>

    <!-- Footer top section -->
    <footer class="text-center bg-dark text-light">
        <div class="container section-container">
            <img src="./files/logo_jensen_vit.png" alt="JENSEN education Logo" class="mb-3" style="max-width: 180px; margin-inline: auto;">
            <div class="mt-3 mb-4 footer-text" style="margin-inline: auto;">
                <p style="font-size: 1.25rem;">JENSEN education grundades 1996 av Håkan Jensen, företagets vd och långsiktiga ägare. JENSEN är ett av Sveriges största privata utbildningsföretag med verksamhet i de flesta större städer runtom i Sverige. Vårt utbildningskoncept ”Träning för verkligheten och bildning som mål” genomsyrar all verksamhet.

                </p>
            </div>
            <div class="">
                <a href="https://www.facebook.com/jensengymnasieskolor/"><img src="./files/TT-f.svg" alt="Icon 1" class="mx-2" style="width: 30px; height: 30px;"></a>
                <a href="https://www.linkedin.com/company/jensen-education"><img src="./files/TT-l.svg" alt="Icon 2" class="mx-2" style="width: 30px; height: 30px;"></a>
                <a href="mailto:hr@jenseneducation.se"><img src="./files/TT-e.svg" alt="Icon 4" class="mx-2" style="width: 30px; height: 30px;"></a>
            </div>
        </div>
    </footer>

    <!-- Powered by TT footer bottom section -->
    <div class="container my-0 py-1 m-py-2">
        <div class="d-flex flex-column flex-sm-row align-items-start align-items-sm-center"><!-- updated flex classes -->
            <!-- "Powered by" section -->
            <div>
                <span class="mr-1">Levert av</span>
                <a style="text-decoration:none; color: inherit;" href="https://talentech.com"><img src="./files/TT-fav.svg" alt="Talentech Logo" style="width: 20px; vertical-align: middle; position: relative; bottom: 1px;"></a>
                <a style="text-decoration:none; color: inherit;" href="https://talentech.com"><span class="ml-1" style="">Talentech</span></a>
            </div>

            <!-- Share section -->
            <div class="mt-2 mt-sm-0 ml-sm-auto"><!-- updated margin and alignment classes -->
                <span class="d-block d-sm-inline mb-1"><!-- updated responsive classes -->
                    Del på sosiale medier:
                    <a href="#" class="facebook-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/facebook.svg" alt="Share on Facebook" width="16" height="16">
                    </a>
                    <a href="#" class="twitter-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/x.svg" alt="Share on X" width="16" height="16">
                    </a>
                    <a href="#" class="linkedin-share-link" target="_blank" rel="noopener noreferrer">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/linkedin.svg" alt="Share on LinkedIn" width="16" height="16">
                    </a>
                </span>
            </div>
        </div>
    </div>


    <!-- Sharing social media links -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            setSocialMediaShareUrls();
        });

        function setSocialMediaShareUrls() {
            var facebookShareLinks = document.querySelectorAll('.facebook-share-link');
            var twitterShareLinks = document.querySelectorAll('.twitter-share-link');
            var linkedinShareLinks = document.querySelectorAll('.linkedin-share-link');
            var currentUrl = encodeURIComponent(window.location.href);

            facebookShareLinks.forEach(link => link.href = 'https://www.facebook.com/sharer/sharer.php?u=' + currentUrl);
            twitterShareLinks.forEach(link => link.href = 'https://twitter.com/intent/tweet?url=' + currentUrl);
            linkedinShareLinks.forEach(link => link.href = 'https://www.linkedin.com/shareArticle?url=' + currentUrl);
        }
    </script>

    <!-- Similar jobs section -->
    <script>
        $(document).ready(function () {
            let jobs = []; // Array to store all jobs
            let displayedJobs = 0; // Counter for the number of jobs currently displayed
            const jobsToShowDesktop = 12; // Number of jobs to show on desktop before "Load More"
            const jobsToShowMobile = 6; // Number of jobs to show on mobile before "Load More"
            let jobsToShow = window.innerWidth > 768 ? jobsToShowDesktop : jobsToShowMobile;

            // Adjust jobsToShow based on window resize
            $(window).resize(function () {
                jobsToShow = window.innerWidth > 768 ? jobsToShowDesktop : jobsToShowMobile;
                displayedJobs = Math.min(jobsToShow, jobs.length); // Adjust displayedJobs based on new jobsToShow
                displayJobs(); // Redisplay jobs based on new size
                updateLoadMoreVisibility(); // Update button visibility after resize
            });

            // Oragnization name for filter (job type)
            function getOrganizationUnitName(job) {
                return job.organizations?.length > 1
                    ? job.organizations[1]?.nameorgunit
                    : job.organizations?.[0]?.nameorgunit || 'Not specified';
            }

            // Function to populate filter dropdowns based on jobs
            function populateFilters() {
                const locationSet = new Set();
                const jobTypeSet = new Set();

                jobs.forEach(job => {
                    if (job.country) { // Check if job has a country
                        locationSet.add(job.country);
                    }
                    const orgName = getOrganizationUnitName(job);
                    if (orgName && orgName !== 'Not specified') { // Check if job has a title
                        jobTypeSet.add(orgName.trim());
                    }
                });


                // Populate location filter
                $('#locationFilter').html('<option value="All">All platser</option>');
                locationSet.forEach(country => {
                    $('#locationFilter').append(`<option value="${country}">${country}</option>`);
                });

                // Populate job type filter
                $('#jobTypeFilter').html('<option value="All">Alla verksamhetsområden</option>');
                jobTypeSet.forEach(type => {
                    $('#jobTypeFilter').append(`<option value="${type}">${type}</option>`);
                });
            }

            // Function to display jobs based on filters
            function displayJobs() {
                $('#jobList').empty(); // Clear current jobs

                // Apply filters
                const selectedCountry = $('#locationFilter').val();
                const selectedJobType = $('#jobTypeFilter').val();
                let filteredJobs = jobs.filter(job => {
                    const orgName = getOrganizationUnitName(job);
                    return (selectedCountry === 'All' || job.country === selectedCountry) &&
                        (selectedJobType === 'All' || orgName === selectedJobType);
                });

                const jobsToRender = filteredJobs.slice(0, displayedJobs);

                // Add job cards to the DOM
                jobsToRender.forEach(job => {
                    $('#jobList').append(buildJobCard(job));
                });

                updateLoadMoreVisibility(filteredJobs.length); // Update the visibility of the "Load More" button
            }

            // Function to build HTML for a job card
            function buildJobCard(job) {
                // Assuming job-details.html is your detail page and it can handle job IDs
                // Adjust accordingly if your detail page has a different URL structure
                const jobDetailUrl = `job-details.html?jobId=${job.ad_id}`;
                // Use the second organization unit if available, otherwise use the first one
                const organizationUnitName = job.organizations.length > 1 ? job.organizations[1].nameorgunit : job.organizations[0]?.nameorgunit || 'Not specified';
                return `
<div class="col-12 col-md-4 col-lg-4 mb-4">
    <a href="${jobDetailUrl}" class="" style="text-decoration: none; color: inherit;">
        <div class="card h-100">
            <div class="card-body">
		        <div class="card-category"><span>${organizationUnitName}</span></div>
                <h5 class="card-title">${job.title}</h5>
                <p class="card-text">${job.country}</p>
			    <a href="${jobDetailUrl}" class="stretched-link">
                <img src="./files/arrow-right-thin.svg" class="stretched-link" alt="Details" style="">
		</a>
            </div>
        </div>
    </a>
</div>`;
            }

            // Function to update the visibility of the "Load More" button
            function updateLoadMoreVisibility(filteredCount) {
                if (displayedJobs >= filteredCount) {
                    $('#loadMore').hide();
                } else {
                    $('#loadMore').show();
                }
            }

            // Function to fetch jobs from the API
            $(document).ready(function () {
                const currentJobId = new URLSearchParams(window.location.search).get('jobId');
                fetchJobs(currentJobId); // Pass currentJobId to the fetchJobs function
            });

            function fetchJobs(currentJobId) {
                fetch('https://api.talentech.io/reachmee/feed/jensen')
                    .then(response => response.json())
                    .then(data => {
                        jobs = data.filter(job => job.ad_id !== parseInt(currentJobId));
                        if (jobs.length === 0) {
                            $('#tt-feature-section').hide();
                        } else {
                            displayedJobs = Math.min(jobsToShow, jobs.length);
                            populateFilters();
                            displayJobs();
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching jobs:', error);
                    });
            }


            // Load jobs when page is ready
            fetchJobs();

            // Event listener for "Load More" button
            $('#loadMore').click(function () {
                displayedJobs += jobsToShow; // Increase the number of displayed jobs
                displayJobs(); // Display new set of jobs
                // updateLoadMoreVisibility(); // Check if we still need the "Load More" button
            });

            // Event listeners for filter dropdowns
            $('#locationFilter').change(function () {
                displayedJobs = jobsToShow; // Reset displayed jobs to show initial count based on current device
                displayJobs(); // Apply filter and display jobs
                // updateLoadMoreVisibility(); // Update "Load More" button visibility based on filters
            });

            $('#jobTypeFilter').change(function () {
                displayedJobs = jobsToShow; // Reset displayed jobs to show initial count based on current device
                displayJobs(); // Apply filter and display jobs
                // updateLoadMoreVisibility(); // Update "Load More" button visibility based on filters
            });
        });
    </script>

    <!-- Job page info and description -->
    <script>
        $(document).ready(function () {
            const params = new URLSearchParams(window.location.search);
            // Get 'rmjob' if present, otherwise get 'jobId'
            const jobId = params.get('rmjob') ? parseInt(params.get('rmjob'), 10) : parseInt(params.get('jobId'), 10);

            fetch('https://api.talentech.io/reachmee/feed/jensen')
                .then(response => response.json())
                .then(jobs => {
                    const job = jobs.find(job => job.ad_id === jobId);
                    if (job) {
                        // If organizations is null, return "COMPANY NAME", otherwise proceed with existing logic
                        const organizationUnit = job.organizations ? (job.organizations.length > 1 ? job.organizations[1].nameorgunit : job.organizations[0]?.nameorgunit) : "Talentech";

                        // Fetch the last city from the areas array, if it exists; otherwise, default to 'Not specified'
                        const city = job.areas && job.areas.length > 0 ? job.areas[job.areas.length - 1].name : 'Not specified';

                        const applicationLink = job.link.replace("rmpage=job", "rmpage=apply");
                        $('#applyButton').attr('onclick', `window.location.href='${applicationLink}'`);
                        $('#applyButton-tt').attr('onclick', `window.location.href='${applicationLink}'`);

                        // Set the page title to the job title
                        document.title = job.title;

                        // Display the job title in the designated area with formatting
                        const titleWords = job.title.split(' ');
                        const firstWord = titleWords.shift();
                        const restOfTitle = titleWords.join(' ');
                        $('.job-title').html(`<span style="font-weight:400;">${firstWord}</span> <span style="font-weight:800;">${restOfTitle}</span>`);

                        // Update elements with job details
                        $('.job-title2').html(job.title);
                        $('.job-description').html(job.description);
                        $('.organization-unit').text(organizationUnit);
                        $('.city').text(city);
                        $('.country').text(job.country);
                        $('.publishing-date').text(job.publishing_date);
                        $('.expiration-date').text(job.expiration_date);

                        $('.contact-persons').empty();
                        job.contact_persons.forEach((person) => {
                            const contactInfo = `
                        <div class="contact-person">
                            <p>${person.first_name} ${person.surname}, ${person.position}<br>
                            <a href="mailto:${person.email}">${person.email}</a><br>
                            <a href="tel:${person.phone}">${person.phone}</a></p>
                        </div>`;
                            $('.contact-persons').append(contactInfo);
                        });

                        // Handle additional dynamic elements
                        let collectionId = 'no'; // Default to "no"
                        if (organizationUnit === "Finance") {
                            collectionId = 'mnnvj'; // Specific ID for "Finance"
                        } else if (organizationUnit === "Sales") {
                            collectionId = '7zxwk'; // Example ID for "Sales"
                        } else {
                            collectionId = '7zxwk'; // Other org units
                        }
                        const newDiv = $('<div class="gobi-collection"></div>').attr('data-gobi-collection-id', collectionId);
                        newDiv.insertAfter('#gobi-section');
                        loadGobiScript();
                    } else {
                        $('.job-details').text('Job not found.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching job details:', error);
                    $('.job-details').text('Job details could not be loaded.');
                });

            function loadGobiScript() {
                const gobiScript = document.createElement('script');
                gobiScript.src = 'https://widget.gobistories.com/gwi/6';
                gobiScript.onload = function () {
                    if (typeof gobi !== 'undefined' && gobi.discover) {
                        gobi.discover();
                    }
                };
                document.body.appendChild(gobiScript);
            }
        });
    </script>

    <!-- Open application frame -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const openApplication = urlParams.get('open-application');

            if (openApplication !== null) {
                // Change the src of the iframe
                const applicationFormIframe = document.getElementById('applicationFormIframe');
                applicationFormIframe.src = "https://web103.reachmee.com/ext/I003/393/apply?site=5&lang=SE&validator=9e626e86cdd965bdf74dd0e8e585b5cc&job_id=-1";

                // Hide the job description and metadata
                document.getElementById('process').style.display = 'none';
                document.getElementById('tt-job-section').style.display = 'none';
                document.getElementById('tt-talentech-section-1').style.display = 'none';
                document.getElementById('tt-talentech-section-2').style.display = 'none';
                document.getElementById('tt-feature-section').style.display = 'none';
                document.getElementById('appform-header').style.display = 'none';
                document.getElementById('position-title-meta').style.display = 'none';

                // Populate the position-title h1 with specific text
                const positionTitleH1 = document.getElementById('position-title');
                positionTitleH1.innerText = 'Join our talent pool';
            }
        });

    </script>

    <!-- Sharing social media links -->
    <!-- <script src="/js/share-some.js"></script> -->
</body>

</html>